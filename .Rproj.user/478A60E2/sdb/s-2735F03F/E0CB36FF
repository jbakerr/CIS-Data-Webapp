{
    "collab_server" : "",
    "contents" : "caselist_script <- function(caselist){\n  #Adding Caselist \n  \n  #caselist<-read.csv('caselist.csv', skip = 3, header = T, sep = \",\")\n\n  caselist <- data.frame(apply(caselist, 2, function(x) gsub(\"^$|^ $\", NA, x)))\n  \n  caselist  <- caselist[,colSums(is.na(caselist))<nrow(caselist)]\n  \n  \n  #Changing name of columns, make sure that the column numbers are still accurate. \n  colnames(caselist)[1:2] <- c(\"School\",\"Student.ID\")\n  \n  #Changing name of the progress dataset \n  \n  caselist$Student.ID <- as.character(caselist$Student.ID)\n  \n  age_years <- function(earlier, later)\n  {\n    lt <- data.frame(earlier, later)\n    age <- as.numeric(format(lt[,2],format=\"%Y\")) - as.numeric(format(lt[,1],format=\"%Y\"))\n    \n    dayOnLaterYear <- ifelse(format(lt[,1],format=\"%m-%d\")!=\"02-29\",\n                             as.Date(paste(format(lt[,2],format=\"%Y\"),\"-\",format(lt[,1],format=\"%m-%d\"),sep=\"\")),\n                             ifelse(as.numeric(format(later,format=\"%Y\")) %% 400 == 0 | as.numeric(format(later,format=\"%Y\")) %% 100 != 0 & as.numeric(format(later,format=\"%Y\")) %% 4 == 0,\n                                    as.Date(paste(format(lt[,2],format=\"%Y\"),\"-\",format(lt[,1],format=\"%m-%d\"),sep=\"\")),\n                                    as.Date(paste(format(lt[,2],format=\"%Y\"),\"-\",\"02-28\",sep=\"\"))))\n    \n    age[which(dayOnLaterYear > lt$later)] <- age[which(dayOnLaterYear > lt$later)] - 1\n    \n    age\n  }\n  \n  \n  caselist$Birth.Date <- as.Date(caselist$Birth.Date)\n  \n  caselist$age <- age_years(caselist$Birth.Date, Sys.Date())\n\n  \n  \n  #Adding Birth days\n  \n  return(caselist)\n\n}\n",
    "created" : 1530812682057.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3750885119",
    "id" : "E0CB36FF",
    "lastKnownWriteTime" : 1530815933,
    "last_content_update" : 1530815933334,
    "path" : "~/Code/CIS2017-18/cis_webapp/caselist.R",
    "project_path" : "caselist.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}